sinclairDigital.dependencies.register("console-v1",["$","Handlebars","scrollLock","jQueryUI"],[],function(){var e=window.sinclairDigital||{};if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||t[0]}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var o=e(this),a=o.data("bs.tab");a||o.data("bs.tab",a=new n(this)),"string"==typeof t&&a[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.6",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),o=t.data("target");if(o||(o=t.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var a=n.find(".active:last a"),s=e.Event("hide.bs.tab",{relatedTarget:t[0]}),i=e.Event("show.bs.tab",{relatedTarget:a[0]});if(a.trigger(s),t.trigger(i),!i.isDefaultPrevented()&&!s.isDefaultPrevented()){var r=e(o);this.activate(t.closest("li"),n),this.activate(r,r.parent(),function(){a.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:a[0]})})}}},n.prototype.activate=function(t,o,a){function s(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),a&&a()}var i=o.find("> .active"),r=a&&e.support.transition&&(i.length&&i.hasClass("fade")||!!o.find("> .fade").length);i.length&&r?i.one("bsTransitionEnd",s).emulateTransitionEnd(n.TRANSITION_DURATION):s(),i.removeClass("in")};var o=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=o,this};var a=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',a).on("click.bs.tab.data-api",'[data-toggle="pill"]',a)}(jQuery),e.console={log:function(t,n){var o=$(e.console.id).find("#console-event").children().length,a=$(e.console.id).find("#console-container").children().length;arguments.toJSON=[].slice,opts.debug&&("event"===t?(n=JSON.stringify(arguments).replace(/"/g,"").replace("[event","").replace(/]/g,"").replace(",","").replace(/,/g,"::"),$(e.console.id).find("#console-event").prepend('<code class="event success">'+o+": "+n+"</code>")):$(e.console.id).find("#console-container").prepend('<code class="log">'+a+": "+JSON.stringify(arguments)+"</code>"))},getURLParameter:function(e){for(var t=window.location.search.substring(1),n=t.split("&"),o=0;o<n.length;o++){var a=n[o].split("=");if(a[0]==e)return!a[1]||a[1]}},error:function(t,n){var o=$(e.console.id).find("#console-container").children().length;arguments.toJSON=[].slice,opts.debug&&$(e.console.id).find("#console-container").prepend('<code class="error">'+o+": "+JSON.stringify(arguments)+"</code>")},loadjscssfile:function(e,t){var n;"js"===t?(n=document.createElement("script"),n.setAttribute("type","text/javascript"),n.setAttribute("src",e)):"css"==t&&(n=document.createElement("link"),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e)),void 0!==n&&document.getElementsByTagName("head")[0].appendChild(n)},_getEnvUrl:function(){var e="https://sinclairstoryline.com";return window.location.href.indexOf("local-sinclairstoryline")>0?e="http://local-sinclairstoryline.com":window.location.href.indexOf("int-sinclairstoryline")>0?e="https://int-sinclairstoryline.com":window.location.href.indexOf("qa-sinclairstoryline")>0&&(e="https://qa-sinclairstoryline.com"),e},_getPageData:function(){var t=this._getEnvUrl();e.siteSlug,window.location.pathname},_setPageData:function(){},_setStoryUrl:function(){var e=$("#story-link").text();$("#story-link").html('<a target="blank" href="'+this._getEnvUrl()+e+'" >'+this._getEnvUrl()+e+"</a>")},_requestCDNHeaders:function(){var e=this;$.ajax({url:window.location.href+"/?consoletest",headers:{"X-EC-Debug":"x-ec-cache,x-ec-check-cacheable,x-ec-cache-key,x-ec-cache-state,x-ec-cache-remote"},success:function(t,n,o){e._buildCdnInfoSection(e._parseCDNHeaders(o.getAllResponseHeaders()))},error:function(e){}})},_parseCDNHeaders:function(e){var t,n={};if(!e)return n;t=e.split("\r\n");for(var o=0;o<t.length;o++){var a=t[o],s=a.indexOf(": ");if(s>0){var i=a.substring(0,s),r=a.substring(s+2);n[i]=r}}return n},_buildCdnInfoSection:function(e){var t,n='<table class="table table-bordered">',o=0;for(var a in e)(a.indexOf("X-EC-")>-1||a.indexOf("SBGI-")>-1)&&(t='<tr><td class="table-title">'+a+"</td><td>"+e[a]+"</td></tr>",n+=t,o++);n+="</table>",o&&$("#cdn").append($(n))},_showComponentName:function(){var e='<table class="table">';$('*[class^="component-"]:not(.component-console-v1)').each(function(){var t=$(this),n=t.attr("class"),o=[],a="";o=n.split(" ");for(var s=0;s<o.length;s++){var i=o[s];0===i.indexOf("component")&&(a=i)}e+='<tr><td><input type="checkbox" id="'+a+'-check" data-id=".'+a+'" class="label-single-components" /> '+a+"</td></td>",t.addClass("sd-component-debug").prepend('<div class="sd-console-component-label">'+a+"</div>")}),e+="</table>",$("#components").append(e)},_setConsoleResizeable:function(){$("#console").resizable({containment:"document",handles:"n",alsoResize:"#console-placeholder"}),$("#console-placeholder").resizable()},_setReferrer:function(){var t="";e&&e.ast&&e.ast.referrerDomain?t=e.ast.referrerDomain:(t=document.referrer||t,t=extractDomainFromUrl(t),t=t===extractDomainFromUrl(document.location.href)?"null":""===t?"false":t),document.getElementById("ref-id-value").textContent=t},createConsole:function(){if($("#console").length<1){var t=$("#entry-template").html(),n=Handlebars.compile(t);e.console.el=n(),e.console.id="#"+$(e.console.el).attr("id"),$("html").append(e.console.el).css({"margin-bottom":"100px"}).addClass("console-open"),$("body").append('<div id="console-placeholder" style="height: 200px;"></div>');var o=document.querySelector("#console-container");["log","warn","error"].forEach(function(e){console[e]=function(e,t,n){return function(o){if(n){e(o);var a=document.createElement("code");a.classList.add(t),a.textContent=t+": "+o,n.appendChild(a)}}}(console[e].bind(console),e,o)}),$(e.console.id).animate({height:200},300)}},_events:function(){$("#label-components").change(function(){$(this).is(":checked")?($(".sd-component-debug").addClass("sd-component-debug-console-visible"),$(".label-single-components").attr("checked",!0)):($(".label-single-components").attr("checked",!1),$(".sd-component-debug").removeClass("sd-component-debug-console-visible"))}),$(".content-trigger").change(function(){var e=$(this).data();$(this).is(":checked")?$("."+e.id).show():($("."+e.id).hide(),$(".sd-component-debug").removeClass("sd-component-debug-console-visible"))}),$("console-container a").on("click",function(){$(sinclairDependencies.errors).each(function(){})}),$(".label-single-components").change(function(){var e=$(this).data();$(this).is(":checked")?$(e.id).addClass("sd-component-debug-console-visible"):$(e.id).removeClass("sd-component-debug-console-visible")})},init:function(){e.console.debug=!0,e.console.loadjscssfile("/resources/assets/common/jquery-ui-console/jquery-ui.min.css","css"),e.console.createConsole(),e.console._requestCDNHeaders(),e.console._setStoryUrl(),e.console._setReferrer(),e.console._showComponentName(),e.console._setConsoleResizeable(),e.console._events(),$("meta").each(function(){var e="&lt;meta ";$.each(this.attributes,function(t,n){var o=n.name,a=n.value;e+=o+'="'+a+'" '}),e+=" /&gt;\n",$("#meta-data-code").append(e)}),$("#story-data-code").html(JSON.stringify(e.storyData,null,2)),$("#page-data-code").html(JSON.stringify(e.pageData,null,2))}},(e.console.getURLParameter("sd_force_console")||e.console.getURLParameter("sdfc"))&&e.console.init(),window.sinclairDigital=e,window.addEventListener("keypress",function(e){199===e.charCode&&window.sinclairDigital.console.init()},!0)});